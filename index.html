<html>
  <head>
    <title> Test Webmap</title>
    <meta name= "viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel= "stylesheet"/>
    <style>
      body { margin: 0; padding: 0; }
      #map { position: absolute; top: 0; bottom: 0; width: 100%;}
    </style>
  </head>
  <body>
    <div id ="map"></div>
    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoiamltbXlyb2NoYS1pbm5lc2Fzc29jIiwiYSI6ImNtNmw4OG5ibjAwYzIycG9ncmRoaTNwdWcifQ._bVwo6TxNtDdZy92K8xx_g'
      const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/dark-v11',
        center: [-71.13690, 42.45230],
        zoom: 12
      })
      
map.addControl(new mapboxgl.NavigationControl(), 'top-right');
map.addControl(new mapboxgl.ScaleControl());

    map.on('load', () => {
        map.addSource('winchester', {
            type: 'geojson',
            // Use a URL for the value for the `data` property.
            data: 'https://arcgisserver.digital.mass.gov/arcgisserver/rest/services/AGOL/Towns_survey_polym/FeatureServer/0/query?outFields=*&where=TOWN_ID%3D344&f=geojson'
        });

        map.addLayer({
            'id': 'winchester_outline',
            'type': 'line',
            'source': 'winchester',
            'paint': {
                'line-color': 'red',
                'line-width': 5,
                'line-opacity': 0.1
            }
        });
    });

    map.on('load', () => {
        map.addSource('towns', {
            type: 'geojson',
            // Use a URL for the value for the `data` property.
            data: 'https://arcgisserver.digital.mass.gov/arcgisserver/rest/services/AGOL/Towns_survey_polym/FeatureServer/0/query?outFields=*&where=TOWN_ID%3C%3E344&f=geojson'
        });

        map.addLayer({
            'id': 'towns_fill',
            'type': 'fill',
            'source': 'towns',
            'paint': {
                'fill-color': 'black',
                'fill-opacity': 0.9
            }
        });
    });

    </script>
</html>
